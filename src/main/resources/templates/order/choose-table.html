<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layouts/end_user_layout :: layout(~{::title},
       ~{::#extra_head_content}, ~{::#content}, ~{::#extra_scripts})}">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <th:block id="extra_head_content">
        <style>
            body {
                font-family: 'Roboto', sans-serif;
                font-weight: 400px;
            }
            .time-container {
                border-top: 5px solid #ffa500;
                border-right: 5px solid #ffa500;
                border-left: 5px solid #ffa500;
                height: 50px;
                display: flex;
                justify-content: flex-end;;
            }
            .time-container p {
                font-size: 20px;
            }
            .time {
                display: flex;
                flex-direction: column;
                justify-content: center;
            }
            .time h3 {
                padding-bottom: 4px;
            }
            .dropdown {
                display: flex;
                justify-content: center;
                align-items: center;
            }
            .table-container {
                border: 5px solid #ffa500;
                height: 500px;
            }
            .contain-header h2{
                font-size: 30px;
            }
            .day-night-container {
                border-right: 3px solid #ffa500;
                height: 490px;
                display: flex;
                flex-direction: column;
            }
            .button-container {
                margin: 20px;
                display: flex;
                justify-content: space-between;
            }
            .button-container button {
              background: #FE980F;
              border: medium none;
              border-radius: 0;
              color: #FFFFFF;
              display: block;
              font-family: 'Roboto', sans-serif;
              padding: 6px 25px;
              align-items: center;
            }
            .day {
                background: none;
                border: none;
                display: flex;
                justify-content: center;
                align-items: center;
                text-align: center;
                height: 250px;
                border-bottom: 1px solid #ffa500;
                transition: background ease-out 0.3s;
                cursor: pointer;
            }
            .day:hover {
                background: #FE980F;
            }
            .night {
                background: none;
                border: none;
                display: flex;
                justify-content: center;
                align-items: center;
                text-align: center;
                height: 240px;
                border-top: 1px solid #ffa500;
                transition: background ease-out 0.3s;
                cursor: pointer;
            }
            .night:hover {
                background: #FE980F;
            }
            .selected {
                background: #FE980F;
            }
            .calendar {
                display: none;
                background: white;
                position: absolute;
                width: 1000px;
                height: 300px;
                border: 1px solid black;
                top: 50px;
                bottom: 0;
                right: -20px;
                z-index: 2;
            }
            .show {
                display: block;
            }
            .calendar-content {
                display: flex;
                justify-content: center;
            }
            .month-display {
                margin: auto;
                padding: auto;
            }
             .month-display table {
                border: 2px solid black;
                min-width: 210px;
            }
            .calendar-content table td {
                text-align: center;
            }
            .table button {
                  background: #FE980F;
                  border: medium none;
                  border-radius: 0;
                  color: #FFFFFF;
                  font-family: 'Roboto', sans-serif;
                  align-items: center;
                  transition: transform ease-out 0.3s;
            }
            .table button:hover {
                transform: scale(1.4);
            }
            .hidden-checkbox {
                display: none;
            }
            .table-option {
                border: 1px solid black;
                border-radius: 25px;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                text-align: center;
                transition: transform ease-out 0.3s;
            }
            .hidden-checkbox:checked + .table-option {
                background-color: #FE980F; /* Nền cam khi được chọn */
                border-color: #FE980F;
                color: black;
                box-shadow: 0 0 8px rgba(254, 152, 15, 0.5);
                opacity: 0.7;
            }
            .table-option:hover {
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
                transform: translateY(-2px);
            }
        </style>
    </th:block>
</head>
<body>
<th:block id="content">
    <div class="order-table-container">
        <div class="container">
            <div class="contain-header">
                <center><h2>Table Order</h2></center>
                <h5 style="text-decoration: italic;">- You must order at least one week from now and three months back,
                    we have to prepare for your party :)</h5>
            </div>
            <div class="contain-body" th:object="${chosenDay}">
                <form action="/getTables" th:object="${tables}" method="post">
                    <div class="time-container row">
                        <div class="time"><h3><span th:text="${chosenDay.get(0).orderDate}"></span></h3></div>
                        <div class="dropdown" style="margin-left: 415px; margin-right: 20px">
                            <div id="dropdown-btn">
                            <span style="cursor: pointer; user-select: none;"><i class="fa fa-calendar"></i> Choose day <i
                                    id="arrow" class="fa fa-angle-down"></i></span>
                            </div>
                            <div id="calendar" class="calendar">
                                <div class="calendar-content">
                                    <div class="month-display" th:each="month, iterStat : ${calendar}">
                                        <span th:text="${months[iterStat.index]}"></span>
                                        <table class="table">
                                            <tr>
                                                <th>Sun</th>
                                                <th>Mon</th>
                                                <th>Tue</th>
                                                <th>Wed</th>
                                                <th>Thu</th>
                                                <th>Fri</th>
                                                <th>Sat</th>
                                            </tr>
                                            <tr th:each="week : ${month}">
                                                <td th:each="day : ${week}">
                                                    <form action="" method="get"
                                                          th:if="${!#strings.isEmpty(day) && (day != 'X')}">
                                                        <button type="submit">
                                                            <span th:text="${day}"></span>
                                                        </button>
                                                    </form>
                                                    <a href="" th:if="${day == 'X'}">
                                                        <button disabled style="background: grey;">
                                                            <span th:text="${day}"></span>
                                                        </button>
                                                    </a>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="table-container row">
                        <div class="day-night-container col-sm-1" style="margin-bottom: 12px; padding: 0;">
                            <form action="" method="get">
                                <button type="submit" class="day selected">
                                    <b>
                                        Day
                                        (11.00AM–2.00PM)
                                    </b>
                                </button>
                            </form>
                            <form action="" method="get">
                                <form action="" method="get">
                                    <button type="submit" class="night">
                                        <b>
                                            Night
                                            (5.00PM-8.00PM)
                                        </b>
                                    </button>
                                </form>
                            </form>
                        </div>
                        <div class="choose-table-container col-sm-11">
                            <div class="table-content">
                                <!--                                Display tables-->
                                <div class="day-tables row">
                                    <div th:each="table : ${chosenDay}" th:if="table.slot == 'DAY'" class="col-sm-2">
                                        <input type="checkbox"
                                               th:id="'table_' + ${table.tableNumber}"
                                               th:name="selectedTables"
                                               th:value="${table.tableNumber}"
                                               class="hidden-checkbox"/>
<!--                                        col-sm-2 for 36 table displaying-->
                                        <label th:for="'table_' + ${table.tableNumber}" class="table-option">
                                            <span th:text="${'Table ' + table.tableNumber}"></span>
                                            <span class="table-status"
                                                  th:if="${table.status == T(com.example.demo.model.TableStatus).AVAILABLE}">AVAILABLE</span>
                                            <span class="table-status occupied"
                                                  th:if="${table.status == T(com.example.demo.model.TableStatus).OCCUPIED}">OCCUPIED</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="night-tables row">

                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="contain-footer">
                <div class="button-container">
                    <button><i class="fa fa-arrow-left"></i> Back</button>
                    <button><i class="fa fa-arrow-right"></i> Accept & Continue</button>
                </div>
            </div>
        </div>
    </div>
</th:block>
<th:block id="extra_scripts">
    <script>
        window.onload = function () {
            document.getElementById("dropdown-btn").onclick = function () {
                showCalendar();
            };
        };

    function showCalendar() {
    const calendar = document.getElementById("calendar");
    const arrow = document.getElementById("arrow");
        calendar.classList.toggle("show");
        if (calendar.classList.contains("show")) {
            arrow.classList.remove("fa-angle-down");
            arrow.classList.add("fa-angle-up");
        } else {
            arrow.classList.remove("fa-angle-up");
            arrow.classList.add("fa-angle-down");
        }
    }
    </script>
</th:block>
</body>
</html>